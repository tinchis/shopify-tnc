{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  .font-instrument {
    font-family: 'Instrument Serif', serif;
  }
{%- endstyle -%}

<div class="section-{{ section.id }}-padding page-width">
  <!-- Section Heading -->
  <h2 class="font-instrument text-[40px] md:text-[50px] mb-10 text-[#181816] text-center md:text-left break-words">
    {{ section.settings.heading | default: "Our Blog" }}
  </h2>

  {%- if section.settings.blog != blank and section.settings.blog.articles_count > 0 -%}
    {%- assign hero_article = section.settings.blog.articles | first -%}
    
    <!-- Hero Article -->
    <div class="flex flex-col-reverse md:flex-row gap-10 md:gap-20 mb-20 items-center">
      <!-- Content (Left) -->
      <div class="flex flex-col flex-1 gap-6 w-full min-w-0 text-center md:text-left items-center md:items-start">
        <div class="flex items-center gap-2 text-[#555]">
          <span class="svg-wrapper w-5 h-5">
            <svg viewBox="0 0 24 24" fill="none" class="w-full h-full" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </span>
          <span class="uppercase tracking-wider text-sm font-medium">
             {{ hero_article.published_at | time_tag: format: 'date' }}
          </span>
        </div>
        
        <h3 class="font-instrument text-[36px] md:text-[48px] leading-tight text-[#181816] break-words">
          <a href="{{ hero_article.url }}" class="hover:underline text-inherit decoration-1 underline-offset-4">
            {{ hero_article.title }}
          </a>
        </h3>

        <div class="text-[#555] text-lg leading-relaxed break-words">
          {%- if hero_article.excerpt.size > 0 -%}
            {{ hero_article.excerpt | strip_html | truncatewords: 30 }}
          {%- else -%}
            {{ hero_article.content | strip_html | truncatewords: 30 }}
          {%- endif -%}
        </div>

        <a href="{{ hero_article.url }}" class="w-fit px-8 py-3 border border-[#181816] rounded-lg text-[#181816] font-medium hover:bg-[#181816] hover:text-white transition-colors text-sm uppercase tracking-wide mt-2">
          Read More
        </a>
      </div>

      <!-- Image (Right) -->
      <div class="flex-1 w-full relative group h-full">
        <a href="{{ hero_article.url }}" class="block overflow-hidden rounded-[30px] aspect-[4/3] w-full h-full">
           {%- if hero_article.image -%}
             <img
               src="{{ hero_article.image | image_url: width: 800 }}"
               alt="{{ hero_article.image.alt | escape }}"
               class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
               loading="lazy"
               width="{{ hero_article.image.width }}"
               height="{{ hero_article.image.height }}"
             >
           {%- else -%}
             {{ 'image' | placeholder_svg_tag: 'w-full h-full object-cover bg-gray-200' }}
           {%- endif -%}
        </a>
      </div>
    </div>

    <!-- Latest Posts Grid -->
    <div class="bg-[#F8F8F8] rounded-[30px] p-8 md:p-12">
      <h3 class="font-instrument text-[32px] md:text-[40px] mb-10 text-[#181816] text-center md:text-left break-words">Latest Posts</h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {%- for article in section.settings.blog.articles offset: 1 limit: 4 -%}
          <div class="flex flex-col gap-4 group">
            <a href="{{ article.url }}" class="overflow-hidden rounded-[20px] aspect-square w-full bg-gray-100 block relative">
              {%- if article.image -%}
                <img
                  src="{{ article.image | image_url: width: 400 }}"
                  alt="{{ article.image.alt | escape }}"
                  class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                  loading="lazy"
                  width="{{ article.image.width }}"
                  height="{{ article.image.height }}"
                >
              {%- else -%}
                {{ 'image' | placeholder_svg_tag: 'w-full h-full object-cover opacity-50' }}
              {%- endif -%}
            </a>
            
            <div class="flex flex-col gap-2">
               <h4 class="font-medium text-lg leading-snug text-[#181816] group-hover:text-[#555] transition-colors break-words">
                 <a href="{{ article.url }}">
                   {{ article.title | truncate: 50 }}
                 </a>
               </h4>
               <div class="flex items-center gap-2 text-sm text-[#777]">
                 <span class="svg-wrapper w-4 h-4">
                    <svg viewBox="0 0 24 24" fill="none" class="w-full h-full" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                 </span>
                 <span>{{ article.published_at | time_tag: format: 'date' }}</span>
               </div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    </div>

  {%- else -%}
     <div class="page-width py-20 text-center">
        <p>Please select a blog in the section settings.</p>
     </div>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "t:sections.featured-blog.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Blog"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "t:sections.featured-blog.settings.blog.label"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "t:sections.featured-blog.presets.name"
    }
  ]
}
{% endschema %}
